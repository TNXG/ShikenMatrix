
## 1. 核心设计公约 (Design System)

### 1.1 布局与响应式策略
- **UI 形态优先级**：
  - **默认形态**：**9:16 竖屏小组件**。所有设计优先考虑垂直堆叠流。
  - **响应式适配**：窗口**允许被拉伸为横屏**。应用需保持良好显示，内容自动重排。
  - **适配规则**：
    - 布局必须使用 **CSS Grid (Auto-fill)** 或 **Flex (Wrap)**。在竖屏时内容单列显示，拉宽后自动变为多列卡片布局。
    - **严禁**使用固定像素宽度（如 `width: 300px`），必须使用百分比（`%`）、`vw/vh`、`min/max-width` 或 `rem`。
    - 确保在任何宽高比下，核心信息都清晰可见且交互可用。

- **语言规范**：
  - **主界面语言**：**简体中文 (Simplified Chinese)**。
  - 所有用户可见的文本、标签、按钮、提示信息等均需使用中文。只有代码中的变量名、日志和错误代码保留英文。

### 1.2 自适应暗色体系 (Adaptive Dark Mode)
- **双模态材质**：
  - **Light Mode**：高明度的白色、浅灰色为主。使用极其通透的磨砂玻璃效果，混合 **“半透明白色”** 作为叠加层。
  - **Dark Mode**：深邃的深灰、午夜蓝为主。使用沉浸感强的烟熏玻璃效果，混合 **“半透明深色”** 作为叠加层。
- **实现方式**：
  - **禁止硬编码颜色**（如 `#000` 或 `#FFF`）。
  - **必须**使用语义化的 CSS 变量定义所有颜色（如 `--bg-glass`, `--text-primary`），并利用 `@media (prefers-color-scheme: dark)` 查询自动切换主题变量。

### 1.3 视觉美学 (Visual Aesthetics) - **高度借鉴 BakaXL**
- **核心风格：现代亚克力/磨砂玻璃 (Acrylic & Glassmorphism)。**
    - **背景处理：** 极其大胆地使用全屏或大面积的背景模糊（`backdrop-filter: blur(20px)`）。UI 层级不是通过不透明的色块区分，而是通过不同程度的**“半透明白色/深色”**叠加来实现。
    - **色彩体系：**
        - **Light Mode：** 以高明度的白色、浅灰色为主（如 `rgba(255, 255, 255, 0.7)` 作为卡片背景），强调通透、轻盈。
        - **Dark Mode：** 以深邃的深灰、午夜蓝为主（如 `rgba(30, 30, 35, 0.7)` 作为卡片背景），强调沉浸感。
        - **品牌点缀：** 辅以少量清透的品牌色（如天蓝色）作为高亮和图标的点缀。
    - **版式布局：** 采用了大量的**留白 (Whitespace)**。文本层级分明，标题使用大号无衬线字体（Sans-serif），正文颜色稍淡，减少视觉噪点。
    - **圆角美学：** 所有的卡片、按钮、模态框都使用了较大的圆角（**统一为 20px - 24px**），消除了尖锐感，增加了亲和力。小按钮或胶囊形元素可采用 `border-radius: 100px`。

### 1.4 UX 设计 (User Experience)
- **底部导航优先 (Bottom Navigation)：**
    - 将核心功能（如设置、主页、功能抽屉）放置在底部。
    - 底部导航栏必须设计为**悬浮胶囊形态**，带有明显的阴影和模糊效果，脱离边缘。
    - 这种设计符合竖屏场景下的单手操作和视觉重心。
- **非模态/轻量级跳转与空间纵深交互：**
    - **严禁**使用传统的阻断式弹窗。
    - 所有次级界面（如设置页面、详情页）的打开，应通过**半屏覆盖 (Bottom Sheet)** 或**侧边抽屉 (Side Sheet)** 的形式。
    - **关键动画：** 当次级界面打开时，当前主视图（背景层）必须**微微向后退（`transform: scale(0.95)`）并进一步增加模糊度**，创造 Z 轴纵深感，同时新视图从底部或侧边滑入并淡入。
    - **信息分块 (Chunking)：** 将复杂信息（如设置选项）封装为独立的**“交互卡片”**，而非枯燥的列表。每个卡片包含图标、标题，通过视觉分块降低认知负荷。

### 1.5 动画设计 (Motion & Animation) - **灵魂所在，必须严格遵循**
- **物理模拟与非线性缓动 (Spring & Easing)：**
    - 所有的移动、缩放、透明度变化都**不是匀速的**。
    - **必须**使用 `cubic-bezier(0.25, 0.8, 0.25, 1)` 或其他模拟**弹簧回弹效果**的缓动曲线。
    - 动效应给人一种“有重量感”但又极其丝滑的触感。
- **视差与缩放 (Parallax & Scale)：**
    - **页面进入/退出：** 当一个新页面（如设置面板）打开时，其背后的主页面必须触发**“背景缩放与模糊”**动画：主页面 `transform: scale(0.95)` 并同时增加 `backdrop-filter: blur(...)` 的值，新页面则从底部/侧边滑入并淡入。
    - **元素进入/退出：** 任何元素的出现和消失，都必须伴随着位移（`transform: translateY/X`）和透明度（`opacity`）的变化，拒绝生硬的 `display: none` 到 `display: block` 切换。
- **微交互：** 鼠标悬停在可交互元素（如列表项、卡片）上时，背景色应平滑过渡（`transition-colors duration-200`），并伴随轻微的 `transform: translateY(-2px)` 上浮效果，提供柔和的反馈。

---

## 2. 技术架构规范

### 前端 (Vue 3 + TypeScript)
- **框架栈**：Vue 3 (Composition API, `<script setup>` 语法)，TypeScript 5.x，Vite。
- **样式规范**：
  - 采用 **Scoped CSS** 确保组件样式隔离。
  - **必须**使用语义化的 CSS 变量进行主题管理，变量命名遵循 `--component-property-state` 规范。
  - **响应式布局**：核心组件的布局必须使用 `display: grid` 配合 `grid-template-columns: repeat(auto-fill, minmax(MinCardWidth, 1fr))` 或 `display: flex` 配合 `flex-wrap: wrap`。
- **组件化**：将 UI 拆分为可复用、职责单一的细粒度 Vue 组件。

### 后端 (Rust + Tauri)
- **框架栈**：Tauri v2，Rust Edition 2024。
- **命令设计**：所有系统级功能（如获取窗口信息、媒体元数据）必须通过 `#[tauri::command]` 宏暴露给前端。
- **错误处理**：Rust 侧返回统一的 `Result<T, String>` 或自定义错误枚举，错误消息需清晰明了。
- **窗口配置 (tauri.conf.json)**：
  - 初始窗口尺寸必须设置为 **9:16 的比例**。
  - **`resizable: true`** 允许用户调整窗口大小，但应设置合理的 `minWidth` 和 `minHeight`。
  - 推荐设置 `transparent: true` 和 `decorations: false` 以实现无边框、透明小组件效果。

---

## 3. CSS 变量定义规范 (必须遵守)

在 `src/assets/main.css` 或 `App.vue` 中，必须包含以下主题变量定义。所有组件样式都应引用这些变量。

```css
:root {
  /* 亮色模式 (默认) */
  --bg-app: rgba(245, 245, 250, 0.0); /* 应用背景应完全透明，透出桌面壁纸 */
  --bg-glass: rgba(255, 255, 255, 0.65); /* 卡片、容器背景 */
  --bg-glass-hover: rgba(255, 255, 255, 0.85); /* 悬停状态的卡片背景 */

  --text-primary: #1c1c1e; /* 主要文本颜色 */
  --text-secondary: #636366; /* 次要文本颜色 */
  --text-tertiary: #aeaeb2; /* 辅助文本颜色 */

  --border-glass: rgba(255, 255, 255, 0.4); /* 玻璃效果的边框颜色 */
  --shadow-card: 0 8px 24px rgba(0, 0, 0, 0.06); /* 卡片阴影 */

  --accent-color: #007aff; /* 强调色，用于按钮、高亮等 */
}

@media (prefers-color-scheme: dark) {
  :root {
    /* 暗色模式 (自动适配) */
    --bg-glass: rgba(30, 30, 35, 0.70);
    --bg-glass-hover: rgba(44, 44, 50, 0.85);
  
    --text-primary: #f2f2f7;
    --text-secondary: #aeaeb2;
    --text-tertiary: #636366;
  
    --border-glass: rgba(255, 255, 255, 0.1);
    --shadow-card: 0 8px 24px rgba(0, 0, 0, 0.3);
  }
}

body {
  color: var(--text-primary);
  /* 字体优化 */
  font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", sans-serif;
}
```

---

## 4. 开发流程指引

当你接收到一个新任务时，请按以下步骤执行：

1.  **需求分析与设计**：
    *   明确功能目标。
    *   **核心思考：** 该功能在 **9:16 竖屏** 且具有 **当前程序风格的“通透感”和“流动感”** 下如何展示和交互？
    *   设想其在**暗色模式**下的视觉效果和配色。
    *   确定所有用户可见的文本都将是**简体中文**。

2.  **后端实现 (Rust)**：
    *   在 `src-tauri/src/` 目录下编写或修改 Rust 模块。
    *   实现核心逻辑，并通过 `#[tauri::command]` 暴露必要的函数。
    *   确保所有返回 `Result` 的函数，其 `Err` 部分能提供清晰的中文或英文错误描述字符串。

3.  **前端实现 (Vue)**：
    *   创建或修改 Vue 组件。
    *   **严格遵循** BakaXL 的设计语言：应用背景模糊、半透明叠加层、大圆角、物理动效。
    *   使用语义化的 CSS 变量 (`var(--...)`) 填充颜色。
    *   **布局：** 使用 `grid` 或 `flex` 确保内容在竖屏时单列，横屏时自动重排为多列。
    *   **动画：** 确保页面/元素进入退出时，背景有缩放和模糊效果，前景元素使用非线性缓动。

4.  **自测清单**：
    *   [ ] 默认启动是否为竖屏？
    *   [ ] 拉宽窗口时，卡片是否会自动变为多列，并保持美观？
    *   [ ] 切换系统深色模式，UI 元素是否正确适配，文字是否清晰？
    *   [ ] 界面上是否没有未翻译的英文？
    *   [ ] 任何交互（点击、悬停、页面切换）是否都带有**非线性的物理模拟动效**（如弹簧回弹）？
    *   [ ] 当次级页面打开时，主页面是否**微缩并进一步模糊**？